{"version":3,"file":"live-edit2.js","sources":["webpack://microweber-webpack/./userfiles/modules/microweber/api/liveedit2/analizer.js","webpack://microweber-webpack/./userfiles/modules/microweber/api/liveedit2/dom.js","webpack://microweber-webpack/./userfiles/modules/microweber/api/liveedit2/draggable.js","webpack://microweber-webpack/./userfiles/modules/microweber/api/liveedit2/drop-position.js","webpack://microweber-webpack/./userfiles/modules/microweber/api/liveedit2/element-analizer.service.js","webpack://microweber-webpack/./userfiles/modules/microweber/api/liveedit2/handle-menu.js","webpack://microweber-webpack/./userfiles/modules/microweber/api/liveedit2/handle.js","webpack://microweber-webpack/./userfiles/modules/microweber/api/liveedit2/handles-content/element.js","webpack://microweber-webpack/./userfiles/modules/microweber/api/liveedit2/handles.js","webpack://microweber-webpack/./userfiles/modules/microweber/api/liveedit2/interact.js","webpack://microweber-webpack/./userfiles/modules/microweber/api/liveedit2/mode-auto.js","webpack://microweber-webpack/./userfiles/modules/microweber/api/liveedit2/object.service.js","webpack://microweber-webpack/./userfiles/modules/microweber/api/liveedit2/pointer.js","webpack://microweber-webpack/webpack/bootstrap","webpack://microweber-webpack/webpack/runtime/define property getters","webpack://microweber-webpack/webpack/runtime/hasOwnProperty shorthand","webpack://microweber-webpack/webpack/runtime/make namespace object","webpack://microweber-webpack/./userfiles/modules/microweber/api/liveedit2/@live.js"],"sourcesContent":["import {ElementAnalyzerServiceBase} from './element-analizer.service'\r\n\r\nexport class DroppableElementAnalyzerService extends ElementAnalyzerServiceBase  {\r\n\r\n    constructor(settings) {\r\n        super(settings);\r\n        this.settings = settings;\r\n        this._tagsCanAccept = ['DIV', 'ARTICLE', 'ASIDE', 'FOOTER', 'HEADER', 'MAIN', 'SECTION', 'DD', 'LI', 'TD', 'FORM'];\r\n        this.init();\r\n    }\r\n\r\n    isConfigurable (target) {\r\n        return this.isElement(target) || this.isModule(target) || this.isRow(target);\r\n    }\r\n\r\n    isEditableLayout (node) {\r\n        return this.this.isLayout(node) && this.isInEdit(node);\r\n    }\r\n\r\n    canMoveModule (node) {\r\n        return this.isModule(node) && this.isInEdit(node);\r\n    }\r\n\r\n\r\n    canAcceptByClass (node) {\r\n        return this.tools.hasAnyOfClasses(node, this.dropableElements());\r\n    }\r\n\r\n    canAcceptByTag (node) {\r\n        if(!node || node.nodeType !== 1) return false;\r\n        return this._tagsCanAccept.indexOf(node.nodeName) !== -1;\r\n    }\r\n\r\n    allowDrop (node) {\r\n        return this.tools.parentsOrCurrentOrderMatchOrOnlyFirstOrNone(node, [this.settings.allowDrop, this.settings.nodrop]);\r\n    }\r\n\r\n    canInsertBeforeOrAfter (node) {\r\n        return this.canAccept(node.parentNode);\r\n    }\r\n\r\n    canAccept (target) {\r\n        // whether or not \"target\" can accept elements\r\n        return !!(\r\n            this.canAcceptByClass(target) &&\r\n            this.isEditOrInEdit(target) &&\r\n            this.allowDrop(target));\r\n\r\n    }\r\n\r\n    canReceiveElements(target) {\r\n        return this.isEdit(target) && this.canAcceptByTag(target);\r\n    }\r\n\r\n    dropableElements (){\r\n        return this._dropableElements;\r\n    }\r\n\r\n    getIteractionTarget(node) {\r\n        return this.tools.firstWithAyOfClassesOnNodeOrParent(node, [\r\n            this.settings.elementClass,\r\n            this.settings.editClass,\r\n            this.settings.moduleClass,\r\n        ]);\r\n    }\r\n\r\n    getTarget (node) {\r\n\r\n        const target = this.getIteractionTarget(node);\r\n        if(!target || !this.isEditOrInEdit(node) || !this.allowDrop(node)) {\r\n            return null;\r\n        }\r\n        const res = {\r\n            target,\r\n            canInsert: false,\r\n            beforeAfter: false\r\n        }\r\n        if (this.isEdit(target)) {\r\n            res.canInsert = true;\r\n        } else if(this.isElement(target)) {\r\n            if(this.canAcceptByTag(target)) {\r\n                res.canInsert = true;\r\n            }\r\n            //if(this.canInsertBeforeOrAfter(target)) {\r\n                res.beforeAfter = true;\r\n            //}\r\n        } else if(this.isModule(target)) {\r\n            if(this.canInsertBeforeOrAfter(target)) {\r\n                res.beforeAfter = true;\r\n            } else {\r\n                return null;\r\n            }\r\n        }\r\n        return res;\r\n    }\r\n\r\n    init () {\r\n        this._dropableElements = [\r\n            this.settings.elementClass,\r\n            this.settings.cloneableClass,\r\n            this.settings.editClass,\r\n            this.settings.moduleClass,\r\n            this.settings.colClass,\r\n            this.settings.allowDrop,\r\n        ];\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n","export class DomService {\r\n\r\n    static firstWithBackgroundImage (node) {\r\n        if (!node) {\r\n            return null;\r\n        }\r\n        while(node && node.nodeName !== 'BODY') {\r\n            if (!!node.style.backgroundImage) {\r\n                return node;\r\n            }\r\n            node = node.parentElement;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    static hasAnyOfClassesOnNodeOrParent(node, arr) {\r\n        while (node && node.nodeName !== 'BODY') {\r\n            let i = 0, l = arr.length;\r\n            for ( ; i < l ; i++ ) {\r\n                if (node.classList.contains(arr[i])) {\r\n                    return true;\r\n                }\r\n            }\r\n            node = node.parentElement;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    static hasParentWithId (el, id) {\r\n        if (!el) return;\r\n        var curr = el.parentNode;\r\n        while (curr && curr !== document.body) {\r\n            if (curr.id === id) {\r\n                return true;\r\n            }\r\n            curr = curr.parentNode;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    static firstWithAyOfClassesOnNodeOrParent(node, arr) {\r\n        while (node && node.nodeName !== 'BODY') {\r\n            let i = 0, l = arr.length;\r\n            for ( ; i < l ; i++ ) {\r\n                if (node.classList.contains(arr[i])) {\r\n                    return node;\r\n                }\r\n            }\r\n            node = node.parentElement;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    static parentsOrCurrentOrderMatchOrOnlyFirst (node, arr) {\r\n        let curr = node;\r\n        while (curr && curr !== document.body) {\r\n            const h1 = curr.classList.contains(arr[0]);\r\n            const h2 = curr.classList.contains(arr[1]);\r\n            if (h1 && h2) {\r\n                return false;\r\n            }\r\n            else {\r\n                if (h1) {\r\n                    return true;\r\n                }\r\n                else if (h2) {\r\n                    return false;\r\n                }\r\n            }\r\n            curr = curr.parentNode;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    static parentsOrCurrentOrderMatchOrOnlyFirstOrNone (node, arr) {\r\n        let curr = node;\r\n        while (curr && curr !== document.body) {\r\n            const h1 = curr.classList.contains(arr[0]);\r\n            const h2 = curr.classList.contains(arr[1]);\r\n            if (h1 && h2) {\r\n                return false;\r\n            } else {\r\n                if (h1) {\r\n                    return true;\r\n                } else if (h2) {\r\n                    return false;\r\n                }\r\n            }\r\n            curr = curr.parentNode;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    static hasAnyOfClasses (node, arr) {\r\n        if (!node) return;\r\n        let i = 0, l = arr.length;\r\n        for (; i < l; i++) {\r\n            if (node.classList.contains(arr[i])) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    static offset (node) {\r\n        if(!node) return;\r\n        var off = node.getBoundingClientRect();\r\n        var res = {top: off.top, left: off.left, width: off.width, height: off.height, bottom: off.bottom, right: off.right};;\r\n        res.top += scrollY;\r\n        res.bottom += scrollY;\r\n        res.left += scrollX;\r\n        res.right += scrollX;\r\n        return res;\r\n    }\r\n    static parentsOrder (node, arr) {\r\n        var only_first = [];\r\n        var obj = {}, l = arr.length, i = 0, count = -1;\r\n        for (; i < l; i++) {\r\n            obj[arr[i]] = -1;\r\n        }\r\n        if (!node) return obj;\r\n\r\n        var curr = node.parentNode;\r\n        while (curr && curr.nodeName !== 'BODY') {\r\n            count++;\r\n            i = 0;\r\n            for ( ; i < l; i++) {\r\n                if (curr.classList.contains(arr[i]) && only_first.indexOf(arr[i]) === -1) {\r\n                    obj[arr[i]] = count;\r\n                    only_first.push(arr[i]);\r\n                }\r\n            }\r\n            curr = curr.parentNode;\r\n        }\r\n        return obj;\r\n    }\r\n\r\n\r\n}\r\n","\r\nimport {ObjectService} from './object.service';\r\nimport {DroppableElementAnalyzerService} from \"./analizer\";\r\n import {DropPosition} from \"./drop-position\";\r\n\r\nexport const Draggable = function (options, rootSettings) {\r\n    var defaults = {\r\n        handle: null,\r\n        element: null,\r\n        target: document.body,\r\n        targetDocument: document,\r\n        helper: true\r\n    };\r\n    var scope = this;\r\n\r\n    var _e = {};\r\n\r\n    this.on = function (e, f) { _e[e] ? _e[e].push(f) : (_e[e] = [f]) };\r\n    this.dispatch = function (e, f) { _e[e] ? _e[e].forEach(function (c){ c.call(this, f); }) : ''; };\r\n\r\n    var stop = true;\r\n\r\n    var scroll = function (step) {\r\n        scope.settings.targetDocument.body.style.scrollBehavior = 'smooth';\r\n        scope.settings.targetDocument.defaultView.scrollTo(0,scrollY + step);\r\n    }\r\n\r\n    this.config = function () {\r\n        this.settings = ObjectService.extend({}, defaults, options);\r\n        this.setElement(this.settings.element);\r\n        this.dropIndicator = this.settings.dropIndicator;\r\n    };\r\n    this.setElement = function (node) {\r\n        this.element = mw.element(node)/*.prop('draggable', true)*/.get(0);\r\n        if(!this.settings.handle) {\r\n            this.settings.handle = this.settings.element;\r\n        }\r\n        this.handle = this.settings.handle;\r\n    };\r\n\r\n    this.setTargets = function (targets) {\r\n        this.targets = mw.element(targets);\r\n    };\r\n\r\n    this.addTarget = function (target) {\r\n        this.targets.push(target);\r\n    };\r\n\r\n    this.init = function () {\r\n        this.config();\r\n        this.draggable();\r\n    };\r\n\r\n    this.helper = function (e) {\r\n        if(!this._helper) {\r\n            this._helper = document.createElement('div');\r\n            this._helper.className = 'mw-draggable-helper';\r\n            document.body.appendChild(this._helper);\r\n        }\r\n        if (e === 'create') {\r\n            this._helper.style.top = e.pageY + 'px';\r\n            this._helper.style.left = e.pageX + 'px';\r\n            this._helper.style.width = scope.element.offsetWidth + 'px';\r\n            this._helper.style.height = scope.element.offsetHeight + 'px';\r\n\r\n            this._helper.style.display = 'block';\r\n        } else if(e === 'remove' && this._helper) {\r\n            this._helper.style.display = 'none';\r\n        } else if(this.settings.helper && e) {\r\n            this._helper.style.top = e.pageY + 'px';\r\n            this._helper.style.left = e.pageX + 'px';\r\n            this._helper.style.maxWidth = (innerWidth - e.pageX) + 'px';\r\n        }\r\n        return this._helper;\r\n    };\r\n\r\n    this.isDragging = false;\r\n    this.dropableService = new DroppableElementAnalyzerService(rootSettings);\r\n\r\n\r\n    this.dropPosition = DropPosition;\r\n\r\n    this.draggable = function () {\r\n         mw.element(this.settings.target).on('dragover', function (e) {\r\n             scope.target = null;\r\n             scope.action = null;\r\n             if(e.target !== scope.element || !scope.element.contains(e.target)) {\r\n                 var targetAction = scope.dropableService.getTarget(e.target)\r\n\r\n                 if(targetAction && targetAction !== scope.element) {\r\n                     const pos = scope.dropPosition(e, targetAction);\r\n                     if(pos) {\r\n                         scope.target = targetAction.target;\r\n                         scope.action = pos.action;\r\n                         scope.dropIndicator.position(scope.target, pos.action + '-' + pos.position)\r\n                     } else {\r\n\r\n                         scope.dropIndicator.hide()\r\n                     }\r\n\r\n                 } else {\r\n                     scope.dropIndicator.hide()\r\n                 }\r\n                 if (scope.isDragging) {\r\n                     scope.dispatch('dragOver', {element: scope.element, event: e});\r\n                     e.preventDefault();\r\n                 }\r\n             }\r\n\r\n\r\n        }).on('drop', function (e) {\r\n            if (scope.isDragging) {\r\n                e.preventDefault();\r\n                if (scope.target && scope.action) {\r\n                    mw.element(scope.target)[scope.action](scope.element);\r\n                }\r\n\r\n                scope.dispatch('drop', {element: scope.element, event: e});\r\n            }\r\n             scope.dropIndicator.hide();\r\n        });\r\n        this.handle\r\n            .on('dragstart', function (e) {\r\n                scope.isDragging = true;\r\n                if(!scope.element.id) {\r\n                    scope.element.id = ('mw-element-' + new Date().getTime());\r\n                }\r\n                scope.element.classList.add('mw-element-is-dragged');\r\n                e.dataTransfer.setData(\"text\", scope.element.id);\r\n                scope.helper('create');\r\n                scope.dispatch('dragStart',{element: scope.element, event: e});\r\n            })\r\n            .on('drag', function (e) {\r\n                var scrlStp = 90;\r\n                var step = 5;\r\n                if (e.clientY < scrlStp) {\r\n                    scroll(-step)\r\n                }\r\n                if (e.clientY > (innerHeight - (scrlStp + ( this._helper ? this._helper.offsetHeight + 10 : 0)))) {\r\n                    scroll(step)\r\n                }\r\n                scope.dispatch('drag',{element: scope.element, event: e});\r\n                scope.helper(e)\r\n            })\r\n            .on('dragend', function (e) {\r\n                scope.isDragging = false;\r\n                scope.element.classList.remove('mw-element-is-dragged');\r\n                scope.helper('remove');\r\n                scope.dispatch('dragEnd',{element: scope.element, event: e});\r\n                stop = true;\r\n            });\r\n    };\r\n    this.init();\r\n};\r\n","import {DomService} from \"./dom\";\r\n\r\n\r\nlet prevY = -1;\r\nlet prev = null;\r\n\r\nexport const DropPosition = (e, conf) => {\r\n    if(!e || !conf) {\r\n        return false\r\n    }\r\n    const target = conf.target;\r\n    if( !target || target.nodeType !== 1) return false;\r\n    const x = e.pageX;\r\n    const y = e.pageY;\r\n\r\n    /*\r\n    *  conf { canInsert: boolean,  beforeAfter: boolean }\r\n    * */\r\n\r\n\r\n    //  if(x%2 !== 0) return false;\r\n    const rect = DomService.offset(target);\r\n    const res = {};\r\n    const distance = 15;\r\n    if( prevY  === y || !conf || (!conf.canInsert && !conf.beforeAfter)) return false;\r\n    if(conf.canInsert && conf.beforeAfter) {\r\n        if (y >= (rect.top - distance) && y <= (rect.top + distance)) {\r\n            res.position = 'top';\r\n            res.action = 'before';\r\n        } else if ( y >= (rect.top + distance) && y <= (rect.top  + (rect.height/2))) {\r\n            res.position = 'top';\r\n            res.action = 'prepend';\r\n        } else if ( y >= (rect.top + (rect.height/2)) && y <= (rect.bottom - distance)) {\r\n            res.position = 'bottom';\r\n            res.action = 'append';\r\n        }  else if ( y >= (rect.top + (rect.height/2)) && y >= (rect.bottom - distance)) {\r\n            res.position = 'bottom';\r\n            res.action = 'after';\r\n        } else {\r\n            return false;\r\n        }\r\n    } else if(conf.beforeAfter) {\r\n        if ( y >= (rect.top - distance) && y <= (rect.top  + (rect.height/2))) {\r\n            res.position = 'top';\r\n            res.action = 'before';\r\n        } else if ( y >= (rect.top + (rect.height/2)) && y <= (rect.bottom + distance)) {\r\n            res.position = 'bottom';\r\n            res.action = 'after';\r\n        } else {\r\n            return false;\r\n        }\r\n    }  else if(conf.canInsert) {\r\n        if ( y >= (rect.top - distance) && y <= (rect.top  + (rect.height/2))) {\r\n            res.position = 'top';\r\n            res.action = 'prepend';\r\n        } else if ( y >= (rect.top + (rect.height/2)) && y <= (rect.bottom + distance)) {\r\n            res.position = 'bottom';\r\n            res.action = 'append';\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    return res\r\n};\r\n","\r\nimport {DomService} from './dom';\r\n\r\nexport class ElementAnalyzerServiceBase {\r\n\r\n    constructor(settings) {\r\n        this.settings = settings;\r\n        this.tools = DomService;\r\n    }\r\n\r\n    isRow (node) {\r\n        return node.classList.contains(this.settings.rowClass);\r\n    }\r\n\r\n    isModule (node) {\r\n        return node.classList.contains(this.settings.moduleClass) && node.dataset.type !== 'layouts';\r\n    }\r\n\r\n    isLayout (node) {\r\n        return node.classList.contains(this.settings.moduleClass) && node.dataset.type === 'layouts';\r\n    }\r\n\r\n    isElement (node) {\r\n        return node.classList.contains(this.settings.elementClass);\r\n    }\r\n\r\n    isEmptyElement (node) {\r\n        return node.classList.contains(this.settings.emptyElementClass);\r\n    }\r\n\r\n    isEdit (node) {\r\n        return node.classList.contains(this.settings.editClass);\r\n    }\r\n\r\n    isInEdit (node) {\r\n        var order = [\r\n            this.settings.editClass,\r\n            this.settings.moduleClass,\r\n        ];\r\n        return this.tools.parentsOrCurrentOrderMatchOrOnlyFirst(node.parentNode, order);\r\n    }\r\n\r\n    isEditOrInEdit (node) {\r\n        return this.isEdit(node) || this.isInEdit(node);\r\n    }\r\n\r\n    isPlainText (node) {\r\n        return node.classList.contains(this.settings.plainElementClass);\r\n    }\r\n\r\n    getType(node) {\r\n        if(this.isEdit(node)) {\r\n            return 'edit';\r\n        } else if(this.isElement(node)) {\r\n            return 'element';\r\n        } else if(this.isModule(node)) {\r\n            return 'module';\r\n        }  else if(this.isLayout(node)) {\r\n            return 'layout';\r\n        }\r\n    }\r\n}\r\n","import {DomService} from \"./dom\";\r\n\r\nexport const HandleMenu = function(options) {\r\n\r\n    this.options = options || {};\r\n\r\n    var scope = this;\r\n\r\n    this._visible = true;\r\n    this.visible = function () {\r\n        return this._visible;\r\n    };\r\n\r\n    this.createWrapper = function() {\r\n        this.wrapper = document.createElement('div');\r\n        this.wrapper.id = this.options.id || ('mw-handlemenu-' + new Date().getTime());\r\n        this.wrapper.className = 'mw-defaults mw-handlemenu-item ' + (this.options.className || 'mw-handlemenu-type-default');\r\n        this.wrapper.contenteditable = false;\r\n\r\n        mw.element(this.wrapper).on('mousedown', function () {\r\n            this.classList.add('mw-handlemenu-item-mouse-down')\r\n        });\r\n        mw.element(document.documentElement).on('mouseup', function () {\r\n            scope.wrapper.classList.remove('mw-handlemenu-item-mouse-down')\r\n        });\r\n        document.body.appendChild(this.wrapper);\r\n    };\r\n\r\n    this.create = function() {\r\n        this.createWrapper();\r\n        this.createHandler();\r\n\r\n        this.createMenu();\r\n    };\r\n\r\n    this.setTitle = function (icon, title) {\r\n        this.handleIcon.innerHTML = icon;\r\n        this.handleTitle.innerHTML = title;\r\n    };\r\n\r\n    this.hide = function () {\r\n        mw.element(this.wrapper).hide().removeClass('active');\r\n        this._visible = false;\r\n        return this;\r\n    };\r\n\r\n    this.show = function () {\r\n        mw.element(this.wrapper).show();\r\n        this._visible = true;\r\n        return this;\r\n    };\r\n\r\n    this.createHandler = function(){\r\n        this.handle = document.createElement('span');\r\n        this.handleIcon = document.createElement('span');\r\n        this.handleTitle = document.createElement('span');\r\n        this.handle.className = 'mw-handlemenu-handler';\r\n        this.handleIcon.dataset.tip = 'Drag to rearrange';\r\n        this.handleIcon.className = 'tip mw-handlemenu-handler-icon';\r\n        this.handleTitle.className = 'mw-handlemenu-handler-title';\r\n\r\n        this.handle.appendChild(this.handleIcon);\r\n        this.createButtons();\r\n        this.handle.appendChild(this.handleTitle);\r\n        this.wrapper.appendChild(this.handle);\r\n\r\n        this.handleTitle.onclick = function () {\r\n            mw.element(scope.wrapper).toggleClass('active');\r\n        };\r\n        mw.element(document.body).on('click', function (e) {\r\n            if(!DomService.hasParentWithId(e.target, scope.wrapper.id)){\r\n                mw.element(scope.wrapper).removeClass('active');\r\n            }\r\n        });\r\n    };\r\n\r\n    this.menuButton = function (data) {\r\n        var btn = document.createElement('span');\r\n        btn.className = 'mw-handlemenu-menu-item';\r\n        if(data.icon) {\r\n            var iconClass = data.icon;\r\n            if (iconClass.indexOf('mdi-') === 0) {\r\n                iconClass = 'mdi ' + iconClass\r\n            }\r\n            var icon = document.createElement('span');\r\n            icon.className = iconClass + ' mw-handlemenu-menu-item-icon';\r\n            btn.appendChild(icon);\r\n        }\r\n        btn.appendChild(document.createTextNode(data.title));\r\n        if(data.className){\r\n            btn.className += (' ' + data.className);\r\n        }\r\n        if(data.id){\r\n            btn.id = data.id;\r\n        }\r\n        if(data.action){\r\n            btn.onmousedown = function (e) {\r\n                e.preventDefault();\r\n            };\r\n            btn.onclick = function (e) {\r\n                e.preventDefault();\r\n                data.action.call(scope, e, this, data);\r\n                scope.hide()\r\n            };\r\n        }\r\n        return btn;\r\n    };\r\n\r\n    this._defaultButtons = [\r\n\r\n    ];\r\n\r\n    this.createMenuDynamicHolder = function(item){\r\n        var dn = document.createElement('div');\r\n        dn.className = 'mw-handlemenu-menu-dynamic' + (item.className ? ' ' + item.className : '');\r\n        return dn;\r\n    };\r\n    this.createMenu = function(){\r\n        this.menu = document.createElement('div');\r\n        this.menu.className = 'mw-handlemenu-menu ' + (this.options.menuClass ? this.options.menuClass : 'mw-handlemenu-menu-default');\r\n        if (this.options.menu) {\r\n            for (var i = 0; i < this.options.menu.length; i++) {\r\n                if(this.options.menu[i].title !== '{dynamic}') {\r\n                    this.menu.appendChild(this.menuButton(this.options.menu[i])) ;\r\n                }\r\n                else {\r\n                    this.menu.appendChild(this.createMenuDynamicHolder(this.options.menu[i])) ;\r\n                }\r\n\r\n            }\r\n        }\r\n        this.wrapper.appendChild(this.menu);\r\n    };\r\n    this.createButton = function(obj){\r\n        var btn = document.createElement('span');\r\n        btn.className = 'tip mdi ' + obj.icon + (obj.className ? ' ' + obj.className : '');\r\n        btn.dataset.tip = obj.title;\r\n        if (obj.hover) {\r\n            btn.addEventListener('mouseenter', obj.hover[0] , false);\r\n            btn.addEventListener('mouseleave', obj.hover[1] , false);\r\n        }\r\n        btn.onclick = function () {\r\n            this.classList.remove('active');\r\n            obj.action(this);\r\n            scope.hide();\r\n        };\r\n        return btn;\r\n    };\r\n\r\n    this.createButtons = function(){\r\n        this.buttonsHolder = document.createElement('div');\r\n        this.buttonsHolder.className = 'mw-handlemenu-buttons';\r\n        if (this.options.buttons) {\r\n            for (var i = 0; i < this.options.buttons.length; i++) {\r\n                this.buttonsHolder.appendChild(this.createButton(this.options.buttons[i])) ;\r\n            }\r\n        }\r\n        this.handle.appendChild(this.buttonsHolder);\r\n    };\r\n    this.create();\r\n    this.hide();\r\n}\r\n","import {ObjectService} from \"./object.service\";\r\nimport {Draggable} from \"./draggable\";\r\nimport {DropIndicator} from \"./interact\";\r\nimport {DomService} from \"./dom\";\r\n\r\nexport const Handle = function (options) {\r\n\r\n    var defaults = {\r\n\r\n    };\r\n\r\n\r\n    var scope = this;\r\n\r\n    this.settings = ObjectService.extend({}, defaults, options);\r\n\r\n    const _e = {};\r\n    this.on = (e, f) => { _e[e] ? _e[e].push(f) : (_e[e] = [f]) };\r\n    this.dispatch = (e, f) => { _e[e] ? _e[e].forEach( (c) => { c.call(this, f); }) : ''; };\r\n\r\n    var _visible = true;\r\n    var _currentTarget = null;\r\n\r\n    this.isVisible = function () {\r\n        return _visible;\r\n    };\r\n\r\n    this.show = function () {\r\n        _visible = true;\r\n        this.wrapper.removeClass('mw-handle-item-hidden');\r\n    };\r\n    this.hide = function () {\r\n        _visible = false;\r\n        this.wrapper.addClass('mw-handle-item-hidden');\r\n    };\r\n    let _content = null;\r\n    this.setContent = function (content) {\r\n        if(_content){\r\n            _content.remove()\r\n        }\r\n        _content = content;\r\n        this.wrapper.append(_content);\r\n    }\r\n\r\n\r\n    this.initDraggable = function () {\r\n      this.draggable = new Draggable({\r\n          handle: this.handle,\r\n          element: null,\r\n          helper: true,\r\n          dropIndicator: this.settings.dropIndicator\r\n      }, options);\r\n        this.draggable.on('dragStart', function () {\r\n            scope.wrapper.addClass('mw-handle-item-dragging');\r\n        })\r\n        this.draggable.on('dragEnd', function () {\r\n            scope.wrapper.removeClass('mw-handle-item-dragging');\r\n        })\r\n    };\r\n\r\n    this.set = function (target) {\r\n        if (!target) {\r\n            _currentTarget = null;\r\n            return;\r\n        }\r\n        var off = DomService.offset(target);\r\n         this.wrapper.css({\r\n            top: off.top,\r\n            left: off.left,\r\n            width: off.width,\r\n            height: off.height,\r\n        });\r\n        this.show();\r\n        this.draggable.setElement(target);\r\n        if(_currentTarget !== target) {\r\n            _currentTarget = target;\r\n            this.dispatch('targetChange', target);\r\n        }\r\n\r\n    };\r\n\r\n    this.createHandle = function () {\r\n        this.handle = mw.element({\r\n            tag: 'div',\r\n            props: {\r\n                className: 'mw-defaults mw-handle-item-handle',\r\n                contentEditable: false,\r\n                draggable: true,\r\n                innerHTML: this.settings.title\r\n            }\r\n        });\r\n        this.wrapper.append(this.handle);\r\n    }\r\n\r\n    this.createWrapper = function() {\r\n        this.wrapper = mw.element({\r\n            tag: 'div',\r\n            props: {\r\n                className: 'mw-defaults mw-handle-item ' + (this.settings.className || 'mw-handle-type-default'),\r\n                contentEditable: false,\r\n                id: this.settings.id || ('mw-handle-' + new Date().getTime())\r\n            }\r\n        });\r\n\r\n        this.wrapper.on('mousedown', function () {\r\n            mw.tools.addClass(this, 'mw-handle-item-mouse-down');\r\n        });\r\n        mw.element(document.body).on('mouseup touchend', function () {\r\n            mw.tools.removeClass(scope.wrapper, 'mw-handle-item-mouse-down');\r\n        });\r\n        document.body.appendChild(this.wrapper.get(0));\r\n    };\r\n\r\n    this.createWrapper();\r\n    this.createHandle();\r\n    this.initDraggable();\r\n    if(this.settings.content) {\r\n        this.setContent(this.settings.content)\r\n    }\r\n\r\n\r\n\r\n\r\n};\r\n","import {HandleMenu} from \"../handle-menu\";\n\nexport const ElementHandleContent = function () {\n    this.root = mw.element({\n        props: {\n            id: 'mw-handle-item-element-root'\n        }\n    });\n    this.menu = new HandleMenu({\n        id: 'mw-handle-item-element',\n        className: 'mw-handle-type-default',\n        buttons: [\n            {\n                title: mw.lang('Insert'),\n                icon: 'mdi-plus-circle',\n                className: 'mw-handle-insert-button',\n                hover: [\n                    function (e){\n                        handleInsertTargetDisplay(mw._activeElementOver, mw.handleElement.positionedAt);\n                    },\n                    function (e){\n                        handleInsertTargetDisplay('hide');\n                    }\n                ],\n                action: function (el) {\n                    if (!mw.tools.hasClass(el, 'active')) {\n                        mw.tools.addClass(el, 'active');\n                        mw.drag.plus.locked = true;\n                        mw.$('.mw-tooltip-insert-module').remove();\n                        mw.drag.plusActive = this === mw.drag.plusTop ? 'top' : 'bottom';\n\n                        var tooltip = new mw.ToolTip({\n                            content: document.getElementById('plus-modules-list').innerHTML,\n                            element: el,\n                            position: mw.drag.plus.tipPosition(this.currentNode),\n                            template: 'mw-tooltip-default mw-tooltip-insert-module',\n                            id: 'mw-plus-tooltip-selector',\n                            overlay: true\n                        });\n                        tooltip.on('removed', function () {\n                            mw.drag.plus.locked = false;\n                        });\n                        mw._initHandles.hideAll();\n\n                        var tip = tooltip.tooltip.get(0);\n                        setTimeout(function (){\n                            $('#mw-plus-tooltip-selector').addClass('active').find('.mw-ui-searchfield').focus();\n                        }, 10);\n                        mw.tabs({\n                            nav: tip.querySelectorAll('.mw-ui-btn'),\n                            tabs: tip.querySelectorAll('.module-bubble-tab'),\n                        });\n\n                        mw.$('.mw-ui-searchfield', tip).on('input', function () {\n                            var resultsLength = mw.drag.plus.search(this.value, tip);\n                            if (resultsLength === 0) {\n                                mw.$('.module-bubble-tab-not-found-message').html(mw.msg.no_results_for + ': <em>' + this.value + '</em>').show();\n                            }\n                            else {\n                                mw.$(\".module-bubble-tab-not-found-message\").hide();\n                            }\n                        });\n                        mw.$('#mw-plus-tooltip-selector li').each(function () {\n                            this.onclick = function () {\n                                var name = mw.$(this).attr('data-module-name');\n                                var conf = { class: this.className };\n                                if(name === 'layout') {\n                                    conf.template = mw.$(this).attr('template');\n                                }\n                                mw.module.insert(mw._activeElementOver, name, conf, mw.handleElement.positionedAt);\n                                mw.wysiwyg.change(mw._activeElementOver)\n                                tooltip.remove();\n                            };\n                        });\n                    }\n                }\n            }\n        ],\n        menu: [\n            {\n                title: 'Edit HTML',\n                icon: 'mw-icon-code',\n                action: function () {\n                    mw.editSource(mw._activeElementOver);\n                }\n            },\n            {\n                title: 'Edit Style',\n                icon: 'mdi mdi-layers',\n                action: function () {\n                    mw.liveEditSettings.show();\n                    mw.sidebarSettingsTabs.set(3);\n                    if(mw.cssEditorSelector){\n                        mw.liveEditSelector.active(true);\n                        mw.liveEditSelector.select(mw._activeElementOver);\n                    } else {\n                        mw.$(mw.liveEditWidgets.cssEditorInSidebarAccordion()).on('load', function () {\n                            setTimeout(function(){\n                                mw.liveEditSelector.active(true);\n                                mw.liveEditSelector.select(mw._activeElementOver);\n                            }, 333);\n                        });\n                    }\n                    mw.liveEditWidgets.cssEditorInSidebarAccordion();\n                }\n            },\n            {\n                title: 'Remove',\n                icon: 'mw-icon-bin',\n                className:'mw-handle-remove',\n                action: function () {\n                    mw.drag.delete_element(mw._activeElementOver);\n                    mw.handleElement.hide()\n                }\n            }\n        ]\n    });\n\n    this.menu.show()\n\n    this.root.append(this.menu.wrapper)\n\n}\n","export const Handles = function (handles) {\r\n\r\n    this.handles = handles;\r\n    this.dragging = false;\r\n    var scope = this;\r\n\r\n    this.get = function (handle) {\r\n        return this.handles[handle];\r\n    }\r\n\r\n    this.set = function (handle, target){\r\n         this.get(handle).set(target)\r\n    }\r\n\r\n    this.hide = function(handle) {\r\n        if(handle && this.handles[handle]) {\r\n            this.handles[handle].hide();\r\n        } else {\r\n            this.each(function (name, h){\r\n                h.hide()\r\n            });\r\n        }\r\n    };\r\n\r\n    this.hideAllBut = function(handle) {\r\n        this.each(function (name, h){\r\n            if(name !== handle) {\r\n                h.hide()\r\n            }\r\n        });\r\n    };\r\n\r\n    this.show = function(handle) {\r\n        if (handle && this.handles[handle]) {\r\n            this.handles[handle].show();\r\n        } else {\r\n            this.each(function (name, handle){\r\n                handle.show();\r\n            });\r\n        }\r\n    };\r\n\r\n    this.each = function (c) {\r\n        if(!c) return;\r\n        var i;\r\n        for (i in this.handles) {\r\n            c.call(scope, i, this.handles[i]);\r\n        }\r\n    };\r\n\r\n    this.init = function (){\r\n        this.each(function (name, handle){\r\n            handle.draggable.on('dragStart', function (){\r\n                scope.dragging = true;\r\n                scope.hideAllBut(name)\r\n            })\r\n            handle.draggable.on('dragEnd', function (){\r\n                scope.dragging = false;\r\n                handle.show()\r\n            })\r\n        })\r\n    }\r\n\r\n    this.init();\r\n};\r\n","\r\nimport {ObjectService} from \"./object.service\";\r\nimport {DomService} from \"./dom\";\r\n\r\nexport const DropIndicator = function (options) {\r\n\r\n    options = options || {};\r\n\r\n    var defaults = {\r\n        template: 'default'\r\n    };\r\n\r\n    this.settings = ObjectService.extend({}, defaults, options);\r\n\r\n    this._indicator = null;\r\n\r\n    var _e = {};\r\n    this.on = function (e, f) { _e[e] ? _e[e].push(f) : (_e[e] = [f]) };\r\n    this.dispatch = function (e, f) { _e[e] ? _e[e].forEach(function (c){ c.call(this, f); }) : ''; };\r\n\r\n    this.hide = function () {\r\n        this._indicator.addClass('mw-drop-indicator-hidden');\r\n    };\r\n\r\n    this.show = function () {\r\n        this._indicator.removeClass('mw-drop-indicator-hidden');\r\n    };\r\n\r\n    var positions = [\r\n        'before-top', 'prepend-top',\r\n        'after-bottom', 'append-bottom'\r\n    ];\r\n\r\n\r\n    const positionsPrefix = 'mw-drop-indicator-position-';\r\n\r\n    var positionsClasses = positions.map(function (cls){ return positionsPrefix + cls });\r\n\r\n    this.position = function (rect, position) {\r\n        this._indicator.removeClass(positionsClasses);\r\n        if(!rect || !position) return;\r\n            if(rect.nodeType === 1) {\r\n                rect = DomService.offset(rect);\r\n            }\r\n        this._indicator.addClass(positionsPrefix + position);\r\n        this._indicator.css({\r\n            height: rect.height,\r\n            left: rect.left,\r\n            top: rect.top,\r\n            width: rect.width,\r\n        });\r\n        this.show();\r\n        $('.mw-drop-indicator-block').html(position)\r\n    };\r\n\r\n    this.make = function () {\r\n        this._indicator = mw.element();\r\n        this._indicator.html('<div class=\"mw-drop-indicator-block\"><div class=\"mw-drop-indicator-pin\"></div></div>');\r\n        this._indicator.addClass('mw-drop-indicator mw-drop-indicator-template-' + this.settings.template);\r\n        this.hide();\r\n        document.body.appendChild(this._indicator.get(0));\r\n    };\r\n\r\n    this.init = function (){\r\n        this.make();\r\n    };\r\n\r\n    this.init();\r\n\r\n};\r\n","const getElementsLike = (selector, root) => {\r\n    root = root || document.body;\r\n    selector = selector || '*';\r\n    var all = root.querySelectorAll(selector), i = 0, final = [];\r\n    for( ; i<all.length; i++){\r\n        if(!this.scope.helpers.isColLike(all[i]) &&\r\n            !this.scope.helpers.isRowLike(all[i]) &&\r\n            !this.scope.helpers.isEdit(all[i]) &&\r\n            this.scope.helpers.isBlockLevel(all[i])){\r\n            final.push(all[i]);\r\n        }\r\n    }\r\n    return final;\r\n};\r\n\r\nexport const ModeAuto = (root, selector, config, domService, dropableService) => {\r\n    const {\r\n        backgroundImageHolder,\r\n        editClass,\r\n        moduleClass,\r\n        elementClass,\r\n        allowDrop\r\n    } = config;\r\n    root = root || document.body;\r\n    selector = selector || '*';\r\n    var bgHolders = root.querySelectorAll('.' + editClass + '.' + backgroundImageHolder + ', .' + editClass + ' .' + backgroundImageHolder + ', .'+editClass+'[style*=\"background-image\"], .'+editClass+' [style*=\"background-image\"]');\r\n    var noEditModules = root.querySelectorAll('.' + moduleClass + mw.noEditModules.join(',.' + moduleClass));\r\n    var edits = root.querySelectorAll('.edit');\r\n    var i = 0, i1 = 0, i2 = 0;\r\n    for ( ; i < bgHolders.length; i++ ) {\r\n        var curr = bgHolders[i];\r\n        var po = mw.tools.parentsOrder(curr, [editClass, moduleClass]);\r\n        if(po.module === -1 || (po.edit < po.module && po.edit !== -1)){\r\n            if(!mw.tools.hasClass(curr, moduleClass)){\r\n                mw.tools.addClass(curr, editClass);\r\n            }\r\n            curr.style.backgroundImage = curr.style.backgroundImage || 'none';\r\n        }\r\n    }\r\n    for ( ; i1<noEditModules.length; i1++ ) {\r\n        noEditModules[i].classList.remove(moduleClass);\r\n    }\r\n    for ( ; i2 < edits.length; i2++ ) {\r\n        var all = getElementsLike(':not(.' + elementClass + ')', edits[i2]), i2a = 0;\r\n        var allAllowDrops = edits[i2].querySelectorAll('.' + allowDrop), i3a = 0;\r\n        for( ; i3a < allAllowDrops.length; i3a++){\r\n            allAllowDrops[i3a].classList.add(elementClass);\r\n        }\r\n        for( ; i2a<all.length; i2a++) {\r\n            if(!all[i2a].classList.contains(moduleClass)){\r\n                if(dropableService.canAccept(all[i2a])){\r\n                    all[i2a].classList.add( elementClass );\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n","export class ObjectService {\r\n    static extend () {\r\n        const extended = {};\r\n        let deep = false;\r\n        let i = 0;\r\n        const l = arguments.length;\r\n\r\n        if ( Object.prototype.toString.call( arguments[0] ) === '[object Boolean]' ) {\r\n            deep = arguments[0];\r\n            i++;\r\n        }\r\n        const merge = function (obj) {\r\n            for ( const prop in obj ) {\r\n                if ( Object.prototype.hasOwnProperty.call( obj, prop ) ) {\r\n                    if ( deep && Object.prototype.toString.call(obj[prop]) === '[object Object]' ) {\r\n                        extended[prop] = ObjectService.extend( true, extended[prop], obj[prop] );\r\n                    } else {\r\n                        extended[prop] = obj[prop];\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        for ( ; i < l; i++ ) {\r\n            const obj = arguments[i];\r\n            merge(obj);\r\n        }\r\n        return extended;\r\n\r\n    }\r\n}\r\n","import {ObjectService} from './object.service';\r\nimport {DomService} from './dom';\r\n\r\nexport const GetPointerTargets = function(options)  {\r\n\r\n    options = options || {};\r\n\r\n    this.tools = DomService;\r\n\r\n    var scope = this;\r\n\r\n    var defaults = {\r\n        exceptions: ['mw-handle-item']\r\n    };\r\n\r\n    this.settings = ObjectService.extend({}, defaults, options);\r\n\r\n    if ( this.settings.root.nodeType === 9 ) {\r\n        this.document = this.settings.root;\r\n    } else {\r\n        this.document = this.settings.root.ownerDocument;\r\n    }\r\n    this.body = this.document.body;\r\n\r\n    var distanceMax = 20;\r\n\r\n    function distance(x1, y1, x2, y2) {\r\n        return Math.hypot(x2-x1, y2-y1);\r\n    }\r\n\r\n    function isInRange(el1, el2) {\r\n        return distance(el1, el2) <= distanceMax;\r\n    }\r\n\r\n    var validateNode = function (node) {\r\n        return node.type === 1;\r\n    };\r\n\r\n\r\n\r\n\r\n    var round5 = function (x){\r\n        return (x % 5) >= 2.5 ? (x / 5) * 5 + 5 : (x / 5) * 5;\r\n    };\r\n\r\n    var getNearCoordinates = function (x, y) {\r\n        x = round5(x);\r\n        y = round5(y);\r\n        var res = [];\r\n        var x1 = x - distanceMax;\r\n        var x1Max = x + distanceMax;\r\n        var y1 = y - distanceMax;\r\n        var y1Max = y + distanceMax;\r\n        for ( ; x1 < x1Max; x1 += 5) {\r\n            for ( ; y1 <= y1Max; y1 += 5 ) {\r\n                res.push([x1, y1]);\r\n            }\r\n        }\r\n        return res;\r\n    };\r\n\r\n    var addNode = function (el, res) {\r\n        if(el && !!el.parentElement && res.indexOf(el) === -1 && scope.body !== el) {\r\n            res.push(el);\r\n        }\r\n    };\r\n\r\n    this.fromEvent = function (e) {\r\n        if(!scope.tools.hasAnyOfClassesOnNodeOrParent(e.target, this.settings.exceptions)) {\r\n            return this.fromPoint(e.pageX, e.pageY - scrollY);\r\n        }\r\n        return []\r\n    }\r\n    this.fromPoint = function (x, y) {\r\n        var res = [];\r\n        var el = scope.document.elementFromPoint(x, y);\r\n        if (!el ) return [];\r\n        addNode(el, res);\r\n        var dots = getNearCoordinates(x, y);\r\n        dots.forEach(function (coords){\r\n            addNode(scope.document.elementFromPoint(coords[0], coords[1]), res);\r\n        });\r\n        return res;\r\n    };\r\n};\r\n\r\n\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","\n\n import {Handle} from \"./handle\";\nimport {GetPointerTargets} from \"./pointer\";\nimport {ModeAuto} from \"./mode-auto\";\nimport {Handles} from \"./handles\";\nimport {ObjectService} from \"./object.service\";\nimport {DroppableElementAnalyzerService} from \"./analizer\";\n import {DropIndicator} from \"./interact\";\n import {ElementHandleContent} from \"./handles-content/element\";\n  // import \"./css/liveedit.scss\";\n\n\nexport class LiveEdit {\n\n    constructor(options) {\n\n        const scope = this;\n        const _e = {};\n        this.on = (e, f) => { _e[e] ? _e[e].push(f) : (_e[e] = [f]) };\n        this.dispatch = (e, f) => { _e[e] ? _e[e].forEach( (c) => { c.call(this, f); }) : ''; };\n\n        var defaults = {\n            elementClass: 'element',\n            backgroundImageHolder: 'background-image-holder',\n            cloneableClass: 'cloneable',\n            editClass: 'edit',\n            moduleClass: 'module',\n/*            rowClass: 'mw-row',\n            colClass: 'mw-col',\n            safeElementClass: 'safe-element',\n            plainElementClass: 'plain-text',\n            emptyElementClass: 'empty-element',*/\n            nodrop: 'nodrop',\n            allowDrop: 'allow-drop',\n            unEditableModules: [\n                '[type=\"template_settings\"]'\n            ],\n            frameworksClasses: {\n                col: ['col', 'mw-col']\n            },\n            document: document,\n            root: document.body,\n            strict: false // todo: element and modules should be dropped only in layouts\n        };\n\n        this.settings = ObjectService.extend({}, defaults, options);\n\n        this.root = this.settings.root;\n\n        this.elementAnalyzer = new DroppableElementAnalyzerService(this.settings);\n\n        this.dropIndicator = new DropIndicator();\n\n\n        const elementHandleContent = new ElementHandleContent()\n\n        this.handles = new Handles({\n            element: new Handle({...this.settings, title: 'Element', dropIndicator: this.dropIndicator, content: elementHandleContent.root}),\n            module: new Handle({...this.settings, title: 'module:', dropIndicator: this.dropIndicator}),\n            layout: new Handle({...this.settings, title: 'layout', dropIndicator: this.dropIndicator})\n        });\n\n        this.handles.get('element').on('targetChange', function (target) {\n            console.log(target);\n        })\n\n        this.handles.get('module').on('targetChange', function (target) {\n            console.log('module', target);\n        })\n\n        this.observe = new GetPointerTargets(this.settings);\n        //this.dropIndicator = new DropIndicator();\n\n        this.init();\n    }\n\n    init() {\n\n         mw.element(this.root).on('mousemove touchmove', (e) => {\n                if (e.pageX % 2 === 0) {\n                    const elements = this.observe.fromEvent(e);\n                    const first = elements[0];\n                    if(first) {\n                       const type = this.elementAnalyzer.getType(first);\n                       if(type && type !== 'edit') {\n                           this.handles.set(type, elements[0])\n                           if(type === 'element') {\n                               this.handles.hide('module')\n                           } else if(type === 'module') {\n                               this.handles.hide('element')\n                           }\n                       }\n                    }\n                }\n         });\n    };\n\n    // action: append, prepend, before, after\n    insertElement (candidate, target, action) {\n        this.dispatch('beforeElementInsert', {candidate: candidate, target: target, action: action});\n        mw.element(target)[action](candidate);\n        this.dispatch('elementInsert', {candidate: candidate, target: target, action: action});\n    };\n\n    moveElement (candidate, target, action) {\n        this.dispatch('beforeElementMove', {candidate: candidate, target: target, action: action});\n        mw.element(target)[action](candidate);\n        this.dispatch('elementMove', {candidate: candidate, target: target, action: action});\n    };\n\n}\n\nglobalThis.LiveEdit = LiveEdit;\n"],"mappings":";;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;;;;;;;ACjHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;;;;;;;;;;AC5IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;;;;;;;;AC3JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;;;;;;;;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;;;;;;;;AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;;;;;;;;;;;ACnKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;;;;;;;;AC7HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;;;;;;;AC5HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;;;;;;;;;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;;;;;;;ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;;;;;;;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;;;;;;;;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;ACxFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACPA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;A","sourceRoot":""}